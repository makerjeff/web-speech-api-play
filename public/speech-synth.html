<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Speech Synth</title>
    <script src="./js/lib/TimelineLite.js"></script>
</head>
<body>

<div id="container">
    <!--put stuff here-->
</div>

<script>

    var images = [
        {
            name: 'evo',
            fileName: 'evo-d.png'
        },
        {
            name: 'g4',
            fileName: 'g4-d.png'
        },
        {
            name: 'iev',
            fileName: 'iev-d.png'
        },
        {
            name: 'lan',
            fileName: 'lan-d.png'
        },
        {
            name: 'mir',
            fileName: 'mir-d.png'
        },
        {
            name: 'osp',
            fileName: 'osp-d.png'
        }
    ];




    window.addEventListener('load', function(e){
        console.log(e.type + ' fired. Everything loaded');

        var utterance = new SpeechSynthesisUtterance();
        var voices = window.speechSynthesis.getVoices();

        //select the first returned array item as the voice
        utterance.voice = voices.filter(function(data){return data.name == 'Alex';})[0];

        //setup utterance attributes
        utterance.text = 'Good morning Mr. Wu.  Welcome to work.';
        //utterance.lang = 'en-US';
        utterance.volume = 1;
        utterance.rate = 0.9;
        utterance.pitch = 1;

        //window.speechSynthesis.speak(utterance);

        //utterance event listeners
        utterance.addEventListener('start', function(e){
            console.log('started talking.');
            console.log(voices);
        });

        utterance.addEventListener('end', function(e){
            console.log('I\'ve stopped yapping.');
        });

//        utterance.addEventListener('boundary', function(e){
//            console.log('word break.');
//        });

        loadAllImages(images);

        animateImages();


    });


    // default DOMCONTENT LOADED
    window.addEventListener('DOMContentLoaded', function(e){
        console.log(e.type + ' fired');
    });


    function loadAllImages(array){
        var container = document.getElementById('container');

        array.forEach(function(element, index, array){
            var img = document.createElement('img');
            img.id = array[index].name;
            img.src = './img/cars/' + array[index].fileName;

            container.appendChild(img);
        });
    }

</script>

</body>
</html>